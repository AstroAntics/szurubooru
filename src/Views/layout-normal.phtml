<?php
CustomAssetViewDecorator::addStylesheet('../lib/jquery-ui/jquery-ui.css');
CustomAssetViewDecorator::addStylesheet('core.css');
CustomAssetViewDecorator::addScript('../lib/jquery/jquery.min.js');
CustomAssetViewDecorator::addScript('../lib/jquery-ui/jquery-ui.min.js');
CustomAssetViewDecorator::addScript('../lib/mousetrap/mousetrap.min.js');
CustomAssetViewDecorator::addScript('core.js');
?>

<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"/>
	</head>

	<body>
		<script type="text/javascript">
			var lastSearchQuery = <?= json_encode(isset($this->context->transport->lastSearchQuery) ? $this->context->transport->lastSearchQuery : '') ?>;
		</script>

		<nav id="top-nav">
			<div class="main-wrapper">
				<?php $this->renderFile('top-navigation') ?>
			</div>
			<div class="clear"></div>
		</nav>

		<section id="content">
			<div class="main-wrapper">
				<?= $this->renderView() ?>
			</div>
			<div class="clear"></div>
		</section>

		<footer>
			<div class="main-wrapper">
				<hr>
				<span>Load:&nbsp;<?= sprintf('%.05f', microtime(true) - $this->context->startTime) ?>s</span>
				<span>Queries:&nbsp;<?= count(\Chibi\Database::getLogs()) ?></span>
				<span><a href="<?= SZURU_LINK ?>">szurubooru&nbsp;v<?= SZURU_VERSION ?></a></span>
				<?php if (PrivilegesHelper::confirm(Privilege::ListLogs)): ?>
					<span><a href="<?= \Chibi\UrlHelper::route('log', 'list') ?>">Logs</a></span>
				<?php endif ?>
				<hr>
			</div>
		</footer>

		<?php if ($this->config->misc->debugQueries): ?>
			<?= $this->renderFile('debug') ?>
		<?php endif ?>

		<div id="small-screen"></div>
	</body>
</html>
